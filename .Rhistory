diff <- end-start
diff
tweets %>%
select(data__text) %>%
slice_head(n = 10) %>%
mutate(clean_text = str_remove_all(data__text, "@\\S+|#\\S+|https?://\\S+")) |>  # removes hashtags, links, and user tags
#llm_classify(col = clean_text, c("Sarkozy","Le Pen","Other")) -> classified
llm_verify(clean_text, "is this tweet about social fraud?") -> classified
classified
tweets %>%
select(data__text) %>%
slice_head(n = 10) %>%
mutate(clean_text = str_remove_all(data__text, "@\\S+|#\\S+|https?://\\S+")) |>  # removes hashtags, links, and user tags
#llm_classify(col = clean_text, c("Sarkozy","Le Pen","Other")) -> classified
llm_verify(clean_text, "is this tweet about Marine Le Pen?") -> classified
classified
tweets %>%
select(data__text) %>%
slice_head(n = 10) %>%
mutate(clean_text = str_remove_all(data__text, "@\\S+|#\\S+|https?://\\S+")) |>  # removes hashtags, links, and user tags
#llm_classify(col = clean_text, c("Sarkozy","Le Pen","Other")) -> classified
llm_verify(clean_text, "does this tweet mention social fraud?") -> classified
classified
library(mall)
llm_use("ollama","llama3.1",
seed = 100)
library(tidyverse)
tweets <- read.csv("https://zenodo.org/records/7347479/files/FR-R-MIGR-TWIT-2011-2022_meta.csv?download=1", sep = ";")
glimpse(tweets)
tweets |>
slice_head(n = 10) |>
select(data__text)
tweets |>
filter(data__id != "data__id" & data__id!="") -> tweets
tweets |>
mutate(clean_text = str_remove_all(data__text, "#|http?://\\S+")) |>   # removes hashtags and links
select(clean_text)
tweets |>
mutate(clean_text = str_remove_all(data__text, "@|#|http?://\\S+")) |>   # removes hashtags and links
select(clean_text)
library(mall)
llm_use("ollama","llama3.1",
seed = 100)
library(tidyverse)
tweets <- read.csv("https://zenodo.org/records/7347479/files/FR-R-MIGR-TWIT-2011-2022_meta.csv?download=1", sep = ";")
glimpse(tweets)
tweets |>
slice_head(n = 10) |>
select(data__text)
tweets |>
filter(data__id != "data__id" & data__id!="") -> tweets
tweets |>
slice_head(n = 10) |>
select(data__text)
tweets |>
slice_head(n = 10) |>
select(clean_text)
tweets |>
mutate(clean_text = str_remove_all(data__text, "@|#|http?://\\S+")) -> tweets
tweets |>
slice_head(n = 10) |>
select(clean_text)
library(mall)
llm_use("ollama","llama3.1",
seed = 100)
library(tidyverse)
tweets <- read.csv("https://zenodo.org/records/7347479/files/FR-R-MIGR-TWIT-2011-2022_meta.csv?download=1", sep = ";")
glimpse(tweets)
tweets |>
slice_head(n = 10) |>
select(data__text)
tweets |>
filter(data__id != "data__id" & data__id!="") -> tweets
tweets |>
mutate(clean_text = str_remove_all(data__text, "@|#|http?://\\S+")) -> tweets
tweets |>
slice_head(n = 10) |>
select(clean_text)
start <- Sys.time()
tweets |>
slice_head(n = 10) |>
select(data__text) |>
llm_translate(data__text,
language = "english") -> translated
library(mall)
llm_use("ollama","llama3.1",
seed = 100)
library(tidyverse)
tweets <- read.csv("https://zenodo.org/records/7347479/files/FR-R-MIGR-TWIT-2011-2022_meta.csv?download=1", sep = ";")
glimpse(tweets)
tweets |>
slice_head(n = 10) |>
select(data__text)
tweets |>
filter(data__id != "data__id" & data__id!="") -> tweets
tweets |>
mutate(clean_text = str_remove_all(data__text, "@|#|http?://\\S+")) -> tweets
tweets |>
slice_head(n = 10) |>
select(clean_text)
start <- Sys.time()
tweets |>
slice_head(n = 10) |>
select(data__text) |>
llm_translate(data__text,
language = "english") -> translated
end <- Sys.time()
diff <- end-start
diff
translated |>
select(.translation)
start <- Sys.time()
tweets %>%
select(data__text) %>%
slice_head(n = 10) %>%
#llm_classify(col = clean_text, c("Sarkozy","Le Pen","Other")) -> classified
llm_verify(clean_text, "does this tweet mention social fraud?") -> classified
start <- Sys.time()
tweets %>%
select(clean_text) %>%
slice_head(n = 10) %>%
#llm_classify(col = clean_text, c("Sarkozy","Le Pen","Other")) -> classified
llm_verify(clean_text, "does this tweet mention social fraud?") -> classified
end <- Sys.time()
diff <- end-start
diff
classified |>
select(clean_text,.verify)
?llm_use
?llm_verify
library(mall)
llm_use("ollama","llama3.1")
library(tidyverse)
tweets <- read.csv("https://zenodo.org/records/7347479/files/FR-R-MIGR-TWIT-2011-2022_meta.csv?download=1", sep = ";")
glimpse(tweets)
tweets |>
slice_head(n = 10) |>
select(data__text)
tweets |>
filter(data__id != "data__id" & data__id!="") -> tweets
tweets |>
mutate(clean_text = str_remove_all(data__text, "@|#|http?://\\S+")) -> tweets
tweets |>
slice_head(n = 10) |>
select(clean_text)
start <- Sys.time()
tweets |>
slice_head(n = 10) |>
select(data__text) |>
llm_translate(data__text,
language = "english") -> translated
end <- Sys.time()
diff <- end-start
diff
translated |>
select(.translation)
start <- Sys.time()
tweets %>%
select(clean_text) %>%
slice_head(n = 10) %>%
llm_verify(clean_text, "does this tweet mention social fraud?",
pred_name = "socialfraud") -> checked
end <- Sys.time()
diff <- end-start
diff
checked |>
select(clean_text,socialfraud)
start <- Sys.time()
tweets %>%
select(clean_text) %>%
slice_head(n = 10) %>%
llm_verify(clean_text, "does this tweet mention Nicolas Sarkozy?",
pred_name = "sarkozy") -> checked
end <- Sys.time()
diff <- end-start
diff
checked
checked |>
select(clean_text,sarkozy)
start <- Sys.time()
tweets %>%
select(clean_text) %>%
slice_head(n = 10) %>%
llm_verify(clean_text, "does this tweet mention Marine Le Pen?",
pred_name = "lepen") -> checked
end <- Sys.time()
diff <- end-start
diff
checked |>
select(clean_text,lepen)
?mall::llm_extract
library(mall)
llm_use("ollama","llama3.1")
library(tidyverse)
tweets <- read.csv("https://zenodo.org/records/7347479/files/FR-R-MIGR-TWIT-2011-2022_meta.csv?download=1", sep = ";")
glimpse(tweets)
tweets |>
slice_head(n = 10) |>
select(data__text)
tweets |>
filter(data__id != "data__id" & data__id!="") -> tweets
tweets |>
mutate(clean_text = str_remove_all(data__text, "@|#|http?://\\S+")) -> tweets
tweets |>
slice_head(n = 10) |>
select(clean_text)
start <- Sys.time()
tweets |>
slice_head(n = 10) |>
select(data__text) |>
llm_translate(data__text,
language = "english") -> translated
library(mall)
llm_use("ollama","llama3.1")
library(tidyverse)
tweets <- read.csv("https://zenodo.org/records/7347479/files/FR-R-MIGR-TWIT-2011-2022_meta.csv?download=1", sep = ";")
glimpse(tweets)
tweets |>
slice_head(n = 10) |>
select(data__text)
tweets |>
filter(data__id != "data__id" & data__id!="") -> tweets
tweets |>
mutate(clean_text = str_remove_all(data__text, "@|#|http?://\\S+")) -> tweets
tweets |>
slice_head(n = 10) |>
select(clean_text)
start <- Sys.time()
tweets |>
slice_head(n = 10) |>
select(data__text) |>
llm_translate(data__text,
language = "english") -> translated
end <- Sys.time()
diff <- end-start
diff
translated |>
select(.translation)
start <- Sys.time()
tweets %>%
select(clean_text) %>%
slice_head(n = 10) %>%
llm_verify(clean_text, "does this tweet mention social fraud?",
pred_name = "socialfraud") -> checked
end <- Sys.time()
diff <- end-start
diff
checked |>
select(clean_text,socialfraud)
start <- Sys.time()
tweets %>%
select(clean_text) %>%
slice_head(n = 10) %>%
llm_verify(clean_text, "does this tweet mention Marine Le Pen?",
pred_name = "lepen") -> checked
end <- Sys.time()
diff <- end-start
diff
checked |>
select(clean_text,lepen)
start <- Sys.time()
tweets %>%
select(clean_text) %>%
slice_head(n = 10) %>%
llm_extract(clean_text, "politician",
pred_name = "politician") -> extracted
end <- Sys.time()
diff <- end-start
diff
extracted |>
select(clean_text, politician)
start <- Sys.time()
tweets %>%
select(clean_text) %>%
slice_head(n = 10) %>%
llm_extract(clean_text, "political party",
pred_name = "party",
additional_prompt = "return NA if the tweet does not explicitly mention a French political party") -> extracted
end <- Sys.time()
diff <- end-start
diff
extracted |>
select(clean_text, party)
start <- Sys.time()
tweets %>%
select(clean_text) %>%
slice_head(n = 10) %>%
llm_extract(clean_text, "French politician",
pred_name = "politician",
additional_prompt = "return NA if the tweet does not explicitly mention a French politician") -> extracted
end <- Sys.time()
diff <- end-start
diff
extracted |>
select(clean_text, politician)
start <- Sys.time()
tweets %>%
select(clean_text) %>%
slice_head(n = 10) %>%
llm_extract(clean_text, "French politician", #,additional_prompt = "return NA if the tweet does not explicitly mention a French politician"
pred_name = "politician") -> extracted
end <- Sys.time()
diff <- end-start
diff
extracted |>
select(clean_text, politician)
checked |>
select(clean_text,lepen)
start <- Sys.time()
tweets %>%
select(clean_text) %>%
slice_head(n = 10) %>%
llm_extract(clean_text, "French politician",
additional_prompt = "return NA if the tweet does not explicitly mention a French politician",
pred_name = "politician") -> extracted
end <- Sys.time()
diff <- end-start
diff
start <- Sys.time()
tweets %>%
select(clean_text) %>%
slice_head(n = 10) %>%
llm_extract(clean_text, "French politician",
pred_name = "politician") -> extracted
end <- Sys.time()
diff <- end-start
diff
rm(extracted)
tweets %>%
select(clean_text) %>%
slice_head(n = 10) %>%
llm_extract(clean_text, "French politician",
pred_name = "politician") -> extracted
tweets %>%
select(clean_text) %>%
slice_head(n = 10) %>%
llm_extract(clean_text, "French politician",
additional_prompt = "return NA if the tweet does not explicitly mention a French politician",
pred_name = "politician") -> extracted
extracted |>
select(clean_text, politician)
start <- Sys.time()
tweets %>%
select(clean_text) %>%
slice_head(n = 10) %>%
llm_extract(clean_text, "French politician",
pred_name = "politician") -> extracted
end <- Sys.time()
diff <- end-start
diff
extracted |>
select(clean_text, politician)
start <- Sys.time()
tweets %>%
select(clean_text) %>%
slice_head(n = 10) %>%
llm_extract(clean_text, "French politician",
additional_prompt = "return NA if the tweet does not explicitly mention a French politician",
pred_name = "politician") -> extracted
end <- Sys.time()
diff <- end-start
diff
extracted |>
select(clean_text, politician)
extracted |>
select(clean_text, politician)
library(mall)
llm_use("ollama","llama3.1",
seed = 42)
library(tidyverse)
tweets <- read.csv("https://zenodo.org/records/7347479/files/FR-R-MIGR-TWIT-2011-2022_meta.csv?download=1", sep = ";")
glimpse(tweets)
tweets |>
slice_head(n = 10) |>
select(data__text)
tweets |>
filter(data__id != "data__id" & data__id!="") -> tweets
tweets |>
mutate(clean_text = str_remove_all(data__text, "@|#|http?://\\S+")) -> tweets
tweets |>
slice_head(n = 10) |>
select(clean_text)
start <- Sys.time()
tweets |>
slice_head(n = 10) |>
select(data__text) |>
llm_translate(data__text,
language = "english") -> translated
end <- Sys.time()
diff <- end-start
diff
translated |>
select(.translation)
start <- Sys.time()
tweets %>%
select(clean_text) %>%
slice_head(n = 10) %>%
llm_verify(clean_text, "does this tweet mention social fraud?",
pred_name = "socialfraud") -> checked
end <- Sys.time()
diff <- end-start
diff
checked |>
select(clean_text,socialfraud)
start <- Sys.time()
tweets %>%
select(clean_text) %>%
slice_head(n = 10) %>%
llm_verify(clean_text, "does this tweet mention Marine Le Pen?",
pred_name = "lepen") -> checked
end <- Sys.time()
diff <- end-start
diff
checked |>
select(clean_text,lepen)
start <- Sys.time()
tweets %>%
select(clean_text) %>%
slice_head(n = 10) %>%
llm_extract(clean_text, "French politician",
pred_name = "politician") -> extracted
end <- Sys.time()
diff <- end-start
diff
extracted |>
select(clean_text, politician)
start <- Sys.time()
tweets %>%
select(clean_text) %>%
slice_head(n = 10) %>%
llm_extract(clean_text, "French politician",
additional_prompt = "return NA if the tweet does not explicitly mention a French politician",
pred_name = "politician") -> extracted
end <- Sys.time()
diff <- end-start
diff
library(mall)
llm_use("ollama","llama3.1",
seed = 42)
library(tidyverse)
tweets <- read.csv("https://zenodo.org/records/7347479/files/FR-R-MIGR-TWIT-2011-2022_meta.csv?download=1", sep = ";")
glimpse(tweets)
tweets |>
slice_head(n = 10) |>
select(data__text)
tweets |>
filter(data__id != "data__id" & data__id!="") -> tweets
tweets |>
mutate(clean_text = str_remove_all(data__text, "@|#|http?://\\S+")) -> tweets
tweets |>
slice_head(n = 10) |>
select(clean_text)
start <- Sys.time()
tweets |>
slice_head(n = 10) |>
select(data__text) |>
llm_translate(data__text,
language = "english") -> translated
end <- Sys.time()
diff <- end-start
diff
translated |>
select(.translation)
start <- Sys.time()
tweets %>%
select(clean_text) %>%
slice_head(n = 10) %>%
llm_verify(clean_text, "does this tweet mention social fraud?",
pred_name = "socialfraud") -> checked
end <- Sys.time()
diff <- end-start
diff
checked |>
select(clean_text,socialfraud)
start <- Sys.time()
tweets %>%
select(clean_text) %>%
slice_head(n = 10) %>%
llm_verify(clean_text, "does this tweet mention Marine Le Pen?",
pred_name = "lepen") -> checked
end <- Sys.time()
diff <- end-start
diff
checked |>
select(clean_text,lepen)
start <- Sys.time()
tweets %>%
select(clean_text) %>%
slice_head(n = 10) %>%
llm_extract(clean_text, "French politician",
pred_name = "politician") -> extracted
end <- Sys.time()
diff <- end-start
diff
extracted |>
select(clean_text, politician)
start <- Sys.time()
tweets %>%
select(clean_text) %>%
slice_head(n = 10) %>%
llm_extract(clean_text, "French politician",
additional_prompt = "return NA if the tweet does not explicitly mention a French politician",
pred_name = "politician") -> extracted
end <- Sys.time()
diff <- end-start
diff
extracted |>
select(clean_text, politician)
library(mall)
llm_use("ollama","llama3.1")
library(tidyverse)
tweets <- read.csv("https://zenodo.org/records/7347479/files/FR-R-MIGR-TWIT-2011-2022_meta.csv?download=1", sep = ";")
