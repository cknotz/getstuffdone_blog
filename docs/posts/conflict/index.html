<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Carlo Knotz">
<meta name="dcterms.date" content="2025-06-14">

<title>Studying conflict and violence across countries – Testing big ideas with simple methods</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark-2fef5ea3f8957b3e4ecc936fc74692ca.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-6bdd2aebeb936dcddaa5f935a5de481c.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark-508422c006262752e20ae841d8f41dd3.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../../site_libs/bootstrap/bootstrap-6bdd2aebeb936dcddaa5f935a5de481c.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script src="../../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Testing big ideas with simple methods</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About this blog</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Studying conflict and violence across countries</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">Macro</div>
                <div class="quarto-category">UCDP</div>
                <div class="quarto-category">Comparing countries</div>
                <div class="quarto-category">Peace &amp; conflict</div>
                <div class="quarto-category">Political science</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Carlo Knotz </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">June 14, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#conflicts-violence-and-data" id="toc-conflicts-violence-and-data" class="nav-link active" data-scroll-target="#conflicts-violence-and-data">Conflicts, violence, and data</a></li>
  <li><a href="#setup-data-import" id="toc-setup-data-import" class="nav-link" data-scroll-target="#setup-data-import">Setup &amp; data import</a>
  <ul>
  <li><a href="#setup" id="toc-setup" class="nav-link" data-scroll-target="#setup">Setup</a></li>
  <li><a href="#accessing-and-importing-the-dataset" id="toc-accessing-and-importing-the-dataset" class="nav-link" data-scroll-target="#accessing-and-importing-the-dataset">Accessing and importing the dataset</a></li>
  </ul></li>
  <li><a href="#exploring-the-ucpd-conflict-dataset" id="toc-exploring-the-ucpd-conflict-dataset" class="nav-link" data-scroll-target="#exploring-the-ucpd-conflict-dataset">Exploring the UCPD conflict dataset</a>
  <ul>
  <li><a href="#conflict-fatalities-over-time-and-across-countries" id="toc-conflict-fatalities-over-time-and-across-countries" class="nav-link" data-scroll-target="#conflict-fatalities-over-time-and-across-countries">Conflict fatalities over time and across countries</a>
  <ul class="collapse">
  <li><a href="#conflict-fatalities-over-time" id="toc-conflict-fatalities-over-time" class="nav-link" data-scroll-target="#conflict-fatalities-over-time">Conflict fatalities over time</a></li>
  <li><a href="#conflict-fatalities-across-countries" id="toc-conflict-fatalities-across-countries" class="nav-link" data-scroll-target="#conflict-fatalities-across-countries">Conflict fatalities across countries</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#next-steps" id="toc-next-steps" class="nav-link" data-scroll-target="#next-steps">Next steps</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">






<section id="conflicts-violence-and-data" class="level2">
<h2 class="anchored" data-anchor-id="conflicts-violence-and-data">Conflicts, violence, and data</h2>
<p>Why do countries or fellow citizens go to war with each other <span class="citation" data-cites="Waltz1959 Fearon2003">(<a href="#ref-Waltz1959" role="doc-biblioref">Waltz 1959</a>; <a href="#ref-Fearon2003" role="doc-biblioref">Fearon and Laitin 2003</a>)</span>? Why do some wars and conflicts last longer and cause more suffering and loss than others <span class="citation" data-cites="Balch2000">(<a href="#ref-Balch2000" role="doc-biblioref">Balch-Lindsay and Enterline 2000</a>)</span>? What can be done to end wars and conflicts, and to stabilize conflict-prone countries <span class="citation" data-cites="Fjelde2022">(<a href="#ref-Fjelde2022" role="doc-biblioref">Fjelde and Smidt 2022</a>)</span>? Many political scientists, especially those in the subfield of peace and conflict research, care deeply about these and similar questions and try to find answers.</p>
<p>To do so, they can nowadays rely on a whole array of datasets that measure the occurrence, intensity, and duration of different types of violent conflicts within and between countries. Examples include the <em>Uppsala Conflict Data Program</em> (UCDP; <a href="https://ucdp.uu.se/" class="uri">https://ucdp.uu.se/</a>), the <em>Armed Conflict Location &amp; Event Data</em> project (ACLED; <a href="https://acleddata.com/" class="uri">https://acleddata.com/</a>), the <em>Correlates of War</em> project (COW; <a href="https://correlatesofwar.org/" class="uri">https://correlatesofwar.org/</a>), or the <em>International Conflict Data Project</em> (<a href="https://internationalconflict.ua.edu/" class="uri">https://internationalconflict.ua.edu/</a>).<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<p>Many of these datasets have relatively complicated structures, where the unit of analysis is a conflict-year or a single conflict event, and this can make them more difficult (but certainly not impossible) to work with for junior (political) data analysts. But there are some datasets that have simpler structures that are easier to work with, notably the typical country-year structure that is commonly used in comparative politics and comparative political economy (as introduced in <a href="https://cknotz.github.io/getstuffdone_blog/posts/compa_countries/">this post</a>).</p>
<p>One of these easier-to-work with datasets is the <em>Country-Year Dataset on Organized Violence within Country Borders</em> from the <em>Uppsala Conflict Data Program</em> <span class="citation" data-cites="Daviesetal2025 Sundberg2013">(<a href="#ref-Daviesetal2025" role="doc-biblioref">Davies et al. 2025</a>; <a href="#ref-Sundberg2013" role="doc-biblioref">Sundberg and Melander 2013</a>)</span>, which contains information about the number of fatalities and the actors involved in different types of conflicts (intrastate, interstate, and non-state violence, government and non-state group killings) in a large number of countries between 1989 and 2024.</p>
<p>The remainder of this post will show you how you can do some simple (descriptive) analyses with this dataset.</p>
</section>
<section id="setup-data-import" class="level2">
<h2 class="anchored" data-anchor-id="setup-data-import">Setup &amp; data import</h2>
<section id="setup" class="level3">
<h3 class="anchored" data-anchor-id="setup">Setup</h3>
<p>This is a relatively simple descriptive analysis, so we just load the <code>tidyverse</code> package collection (and we can already set a default theme for all <code>ggplot</code> graphs).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_classic</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="accessing-and-importing-the-dataset" class="level3">
<h3 class="anchored" data-anchor-id="accessing-and-importing-the-dataset">Accessing and importing the dataset</h3>
<p>You can access and download the dataset (as a ZIP file) via <a href="https://ucdp.uu.se/downloads/" class="uri">https://ucdp.uu.se/downloads/</a> (under “Other datasets”). Ideally, use the <code>R</code> version (<code>.RDS</code>), unpack the ZIP file, and save the dataset somehwere where you can easily find it again.</p>
<p>To import it, you can use the native <code>R</code> function to import <code>.RDS</code> files, <code>readRDS()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>ged <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"organizedviolencecy_v25_1.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="exploring-the-ucpd-conflict-dataset" class="level2">
<h2 class="anchored" data-anchor-id="exploring-the-ucpd-conflict-dataset">Exploring the UCPD conflict dataset</h2>
<p>As shown in some of the other posts, we should first get an overview over which countries are covered:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(ged<span class="sc">$</span>country_cy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "Afghanistan"                      "Albania"                         
  [3] "Algeria"                          "Andorra"                         
  [5] "Angola"                           "Antigua &amp; Barbuda"               
  [7] "Argentina"                        "Armenia"                         
  [9] "Australia"                        "Austria"                         
 [11] "Azerbaijan"                       "Bahamas"                         
 [13] "Bahrain"                          "Bangladesh"                      
 [15] "Barbados"                         "Belarus"                         
 [17] "Belgium"                          "Belize"                          
 [19] "Benin"                            "Bhutan"                          
 [21] "Bolivia"                          "Bosnia-Herzegovina"              
 [23] "Botswana"                         "Brazil"                          
 [25] "Brunei"                           "Bulgaria"                        
 [27] "Burkina Faso"                     "Burundi"                         
 [29] "Cambodia (Kampuchea)"             "Cameroon"                        
 [31] "Canada"                           "Cape Verde"                      
 [33] "Central African Republic"         "Chad"                            
 [35] "Chile"                            "China"                           
 [37] "Colombia"                         "Comoros"                         
 [39] "Congo"                            "Costa Rica"                      
 [41] "Croatia"                          "Cuba"                            
 [43] "Cyprus"                           "Czech Republic"                  
 [45] "Czechoslovakia"                   "DR Congo (Zaire)"                
 [47] "Denmark"                          "Djibouti"                        
 [49] "Dominica"                         "Dominican Republic"              
 [51] "East Timor"                       "Ecuador"                         
 [53] "Egypt"                            "El Salvador"                     
 [55] "Equatorial Guinea"                "Eritrea"                         
 [57] "Estonia"                          "Ethiopia"                        
 [59] "Federated States of Micronesia"   "Fiji"                            
 [61] "Finland"                          "France"                          
 [63] "Gabon"                            "Gambia"                          
 [65] "Georgia"                          "German Democratic Republic"      
 [67] "Germany"                          "Ghana"                           
 [69] "Greece"                           "Grenada"                         
 [71] "Guatemala"                        "Guinea"                          
 [73] "Guinea-Bissau"                    "Guyana"                          
 [75] "Haiti"                            "Honduras"                        
 [77] "Hungary"                          "Iceland"                         
 [79] "India"                            "Indonesia"                       
 [81] "Iran"                             "Iraq"                            
 [83] "Ireland"                          "Israel"                          
 [85] "Italy"                            "Ivory Coast"                     
 [87] "Jamaica"                          "Japan"                           
 [89] "Jordan"                           "Kazakhstan"                      
 [91] "Kenya"                            "Kingdom of eSwatini (Swaziland)" 
 [93] "Kiribati"                         "Kosovo"                          
 [95] "Kuwait"                           "Kyrgyzstan"                      
 [97] "Laos"                             "Latvia"                          
 [99] "Lebanon"                          "Lesotho"                         
[101] "Liberia"                          "Libya"                           
[103] "Liechtenstein"                    "Lithuania"                       
[105] "Luxembourg"                       "Madagascar (Malagasy)"           
[107] "Malawi"                           "Malaysia"                        
[109] "Maldives"                         "Mali"                            
[111] "Malta"                            "Marshall Islands"                
[113] "Mauritania"                       "Mauritius"                       
[115] "Mexico"                           "Moldova"                         
[117] "Monaco"                           "Mongolia"                        
[119] "Montenegro"                       "Morocco"                         
[121] "Mozambique"                       "Myanmar (Burma)"                 
[123] "Namibia"                          "Nauru"                           
[125] "Nepal"                            "Netherlands"                     
[127] "New Zealand"                      "Nicaragua"                       
[129] "Niger"                            "Nigeria"                         
[131] "North Korea"                      "North Macedonia"                 
[133] "Norway"                           "Oman"                            
[135] "Pakistan"                         "Palau"                           
[137] "Panama"                           "Papua New Guinea"                
[139] "Paraguay"                         "Peru"                            
[141] "Philippines"                      "Poland"                          
[143] "Portugal"                         "Qatar"                           
[145] "Romania"                          "Russia (Soviet Union)"           
[147] "Rwanda"                           "Saint Kitts and Nevis"           
[149] "Saint Lucia"                      "Saint Vincent and the Grenadines"
[151] "Samoa (Western Samoa)"            "San Marino"                      
[153] "Sao Tome and Principe"            "Saudi Arabia"                    
[155] "Senegal"                          "Serbia (Yugoslavia)"             
[157] "Seychelles"                       "Sierra Leone"                    
[159] "Singapore"                        "Slovakia"                        
[161] "Slovenia"                         "Solomon Islands"                 
[163] "Somalia"                          "South Africa"                    
[165] "South Korea"                      "South Sudan"                     
[167] "Spain"                            "Sri Lanka"                       
[169] "Sudan"                            "Suriname"                        
[171] "Sweden"                           "Switzerland"                     
[173] "Syria"                            "Taiwan"                          
[175] "Tajikistan"                       "Tanzania"                        
[177] "Thailand"                         "Togo"                            
[179] "Tonga"                            "Trinidad and Tobago"             
[181] "Tunisia"                          "Turkey"                          
[183] "Turkmenistan"                     "Tuvalu"                          
[185] "Uganda"                           "Ukraine"                         
[187] "United Arab Emirates"             "United Kingdom"                  
[189] "United States of America"         "Uruguay"                         
[191] "Uzbekistan"                       "Vanuatu"                         
[193] "Vatican City State"               "Venezuela"                       
[195] "Vietnam (North Vietnam)"          "Yemen (North Yemen)"             
[197] "Yemen (South Yemen)"              "Zambia"                          
[199] "Zimbabwe (Rhodesia)"             </code></pre>
</div>
</div>
<p>Pretty much the entire world – impressive.</p>
<p>Next, we can check for how many years each country is covered (as also shown <a href="https://cknotz.github.io/getstuffdone_blog/posts/case_selection2/#setup">here</a>):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>ged <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country_cy) <span class="sc">%&gt;%</span> </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">start_year =</span> <span class="fu">min</span>(year_cy, <span class="at">na.rm =</span> T),</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">end_year =</span> <span class="fu">max</span>(year_cy, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span> </span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_range =</span> end_year <span class="sc">-</span> start_year) <span class="sc">%&gt;%</span> </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> start_year, <span class="at">xmax =</span> end_year, </span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">y =</span> <span class="fu">reorder</span>(country_cy, year_range))) <span class="sc">+</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_linerange</span>(<span class="at">linewidth =</span> <span class="dv">3</span>, <span class="at">color =</span> <span class="st">"grey30"</span>) <span class="sc">+</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-5-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="index_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="480"></a></p>
</figure>
</div>
</div>
</div>
<p>This graph is a bit messy and difficult to read, but is clear that most countries are covered for the entire period. Let’s have a closer look at those that have less than full coverage:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>ged <span class="sc">%&gt;%</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country_cy) <span class="sc">%&gt;%</span> </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">start_year =</span> <span class="fu">min</span>(year_cy, <span class="at">na.rm =</span> T),</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">end_year =</span> <span class="fu">max</span>(year_cy, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span> </span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_range =</span> end_year <span class="sc">-</span> start_year) <span class="sc">%&gt;%</span> </span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year_range<span class="sc">&lt;</span>(<span class="dv">2024-1989</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> start_year, <span class="at">xmax =</span> end_year, </span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">y =</span> <span class="fu">reorder</span>(country_cy, year_range))) <span class="sc">+</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_linerange</span>(<span class="at">linewidth =</span> <span class="dv">3</span>, <span class="at">color =</span> <span class="st">"grey30"</span>) <span class="sc">+</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-6-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="index_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Here again, only a few countries are covered for substantively shorter time periods than the others. One of them is the no longer existing German Democratic Republic (“East Germany”). To make things simpler, we can just drop these countries from the dataset:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>ged <span class="sc">%&gt;%</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>(country_cy <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"German Democratic Republic"</span>,<span class="st">"Yemen (South Yemen)"</span>,<span class="st">"Czechoslovakia"</span>))) <span class="ot">-&gt;</span> ged</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="conflict-fatalities-over-time-and-across-countries" class="level3">
<h3 class="anchored" data-anchor-id="conflict-fatalities-over-time-and-across-countries">Conflict fatalities over time and across countries</h3>
<p>Now that we have an overview over the main dimensions of the dataset, we can get to the actual contents. If you have a look at the <a href="https://ucdp.uu.se/downloads/organizedviolencecy/UCDP_OrganizedViolenceCY_Codebook_251.pdf">codebook</a>, you’ll see that the dataset contains mainly estimates of the number of deaths (“fatalities”) associated with different types of violence within a given country and in a given year <span class="citation" data-cites="Sundberg2013">(see also <a href="#ref-Sundberg2013" role="doc-biblioref">Sundberg and Melander 2013</a>)</span>:</p>
<ul>
<li>State-based violence (variables starting with <code>sb_</code>), meaning conflicts between two organized actors where one is a government. This is further divided into:
<ul>
<li>Intra-state conflicts (indicated with <code>intrastate</code>)</li>
<li>Inter-state conflicts (indicated with <code>interstate</code>)</li>
</ul></li>
<li>Non-state violence (variables starting with <code>ns_</code>), meaning conflicts between two or more groups that are not state or government actors</li>
<li>One-sided violence against unarmed civilians (variables starting with <code>os_</code>), which is further divided according to who perpetrated it:
<ul>
<li>Killings by the government of a given country (indicated with <code>gvt_killings</code>)</li>
<li>Killings by any state actor in a given country (indicated with <code>any_gvt_killings</code>)</li>
<li>Killings by non-state groups in a given country (indicated with <code>nsgroup_killings</code>)</li>
</ul></li>
</ul>
<p>There are also estimates of the total number of fatalities for each of the major types of violence (<code>ns</code>, <code>sb</code>, and <code>os</code>), indicated with <code>total</code> in the variable name.</p>
<p>Since, as a <a href="https://www.theguardian.com/notesandqueries/query/0,5753,-21510,00.html">famous saying</a> goes, <em>“the first casuality in war is the truth”</em>, the fatality numbers in the dataset are <em>estimates</em>, and at least the main variables are available as <code>best</code>, <code>low</code>, and <code>high</code> estimates so that users can decide for themselves which estimate(s) they want to rely on.</p>
<p>In the illustrative analysis here, we’ll focus on the total number of fatalities from state-based violence (both between states and between states and non-state actors) in a given country and year, and here the best estimate – i.e., the <code>sb_total_deaths_best_cy</code> variable.</p>
<section id="conflict-fatalities-over-time" class="level4">
<h4 class="anchored" data-anchor-id="conflict-fatalities-over-time">Conflict fatalities over time</h4>
<p>Let’s first have a look at the variation in conflict fatalities over time – i.e., which years since 1989 were the bloodiest in terms of state-based violence?</p>
<p>If you read the <a href="https://cknotz.github.io/getstuffdone_blog/posts/compa_countries/">other post on how to work with cross-country macro-level data</a>, you might have an idea as to how to do this: We aggregate the data by year (<code>year_cy</code>) and then use <code>summarize()</code> to calculate relevant summary statistics (here the overall sum or total of the <code>sb_total_deaths_best_cy</code> variable) for each year. Once we have that, we visualize the result with <code>ggplot()</code>, and we use the pipe operator (<code>%&gt;%</code>) to do all of this in a single operation or “pipeline”:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>ged <span class="sc">%&gt;%</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year_cy) <span class="sc">%&gt;%</span> </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">tdeaths =</span> <span class="fu">sum</span>(sb_total_deaths_best_cy, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span> </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year_cy, <span class="at">y =</span> tdeaths)) <span class="sc">+</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">300000</span>,<span class="dv">50000</span>),</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">300000</span>),</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>                       <span class="at">labels=</span><span class="cf">function</span>(tdeaths) <span class="fu">format</span>(tdeaths, </span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>                                                       <span class="at">big.mark =</span> <span class="st">"'"</span>, </span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>                                                       <span class="at">scientific =</span> <span class="cn">FALSE</span>)) <span class="sc">+</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">"Total fatalities from state-based violence (best estimate)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-8-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="index_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Notice that we adapt the y-scale with <code>scale_y_continuous()</code> to range from 0 to 500’000 and we add a single quotation mark to indicate thousands in the labels.</p>
<p>Overall, global state-based fatalities declined intitially from the 1990s to the 2000s (despite the onset of the Global War on Terror after 2001), and then increased noticeably again in the 2010s and especially in 2021 and 2022.</p>
<p>To get a better sense of what is behind this variation, we can calculate fatality numbers by both year and world region (<code>region_cy</code>) and then visualize the result in the form of a stacked bar plot (notice the <code>position = "stack"</code> option within <code>geom_bar()</code>) and the <code>scale_fill_viridis_d()</code> setting to use the colorblind-friendly viridis color scale for discrete variables.</p>
<div class="cell preview-image">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>ged <span class="sc">%&gt;%</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year_cy,region_cy) <span class="sc">%&gt;%</span> </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">tdeaths =</span> <span class="fu">sum</span>(sb_total_deaths_best_cy, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year_cy, <span class="at">y =</span> tdeaths, <span class="at">fill =</span> region_cy)) <span class="sc">+</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="st">"stack"</span>) <span class="sc">+</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis_d</span>() <span class="sc">+</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">300000</span>,<span class="dv">50000</span>),</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>                       <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">300000</span>),</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>                       <span class="at">labels=</span><span class="cf">function</span>(tdeaths) <span class="fu">format</span>(tdeaths, </span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>                                                       <span class="at">big.mark =</span> <span class="st">"'"</span>, </span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>                                                       <span class="at">scientific =</span> <span class="cn">FALSE</span>)) <span class="sc">+</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">"Total fatalities from state-based violence (best estimate)"</span>,</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">fill =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'year_cy'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-9-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="index_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>When we disaggregate the figures by region, we can get a better sense of what is going on in the data. During the 1990s, many state-based fatalities occurred in Africa, but the second Gulf War in 1991 (between the US-led coalition and Iraq under Saddam Hussein) is clearly visible, as are the protracted conflicts in the Balkan countries following the collapse of Jugoslavia in the mid-1990s. During the 2000s, Asia and the Middle East were most strongly affected, which arguably reflects the Global War on Terror and the US-led interventions in Afghanistan and Iraq. The 2010s are clearly dominated by conflicts in the Middle East, which reflects the aftermath of the Arab Spring and the resulting conflicts in Syria, Iraq, and Libya. Russia’s invasion of Ukraine in 2022 is clearly visible as a massive rise in fatalities in Europe, and so is the conflict in Ethiopia in 2021 and 2022 as a rise in fatalities in Africa.</p>
</section>
<section id="conflict-fatalities-across-countries" class="level4">
<h4 class="anchored" data-anchor-id="conflict-fatalities-across-countries">Conflict fatalities across countries</h4>
<p>We can check if the interpretation of the over-time graphs above makes sense by looking more in detail at the variation across countries. The main change we need to make is to group the data by country (<code>country_cy</code>) so that <code>summarize()</code> calculates summary statistics by country. Then we also filter the data so that countries that never had any fatalities due to state-based violence between 1989 and 2024 are excluded – this avoids the earlier issue that the graph becomes unreadable when too many countries are shown on the y-axis.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>ged <span class="sc">%&gt;%</span> </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country_cy) <span class="sc">%&gt;%</span> </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">tdeaths =</span> <span class="fu">sum</span>(sb_total_deaths_best_cy, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span> </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(tdeaths<span class="sc">&gt;</span><span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> tdeaths, <span class="at">y =</span> <span class="fu">reorder</span>(country_cy, <span class="sc">-</span>tdeaths))) <span class="sc">+</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">500000</span>,<span class="dv">100000</span>),</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>                       <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">500000</span>),</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>                       <span class="at">labels=</span><span class="cf">function</span>(tdeaths) <span class="fu">format</span>(tdeaths, </span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>                                                       <span class="at">big.mark =</span> <span class="st">"'"</span>, </span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>                                                       <span class="at">scientific =</span> <span class="cn">FALSE</span>)) <span class="sc">+</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Total fatalities from state-based violence"</span>,</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">""</span>, <span class="at">caption =</span> <span class="st">"1989-2024; best estimate"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-10-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5"><img src="index_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="480"></a></p>
</figure>
</div>
</div>
</div>
<p>The resulting bar graph covers still many countries, but it also shows that fatalities from state-based violence are quite concentrated in a handful of countries, mainly Ukraine, Afghanistan, Syria, and Ethiopia. The group of high-fatality countries includes exclusively countries in Africa, the Middle East, Asia, and the post-Soviet world, but when we go up to countries that had relatively few fatalities, we find some high-income democracies from the “Global North” such as the United States, the United Kingdom, Germany, Belgium, or Australia.</p>
<p>Finally, we can also show disaggregated over-time trends of conflict fatalities in a given country. To do so, we don’t group and summarize the data but create separate graphs per country with <code>facet_wrap()</code>. It <em>can</em> make sense to do this with the entire dataset, but it is often better to do this only with a selected number of countries and time points to avoid getting many very tiny and unreadable graphs. In this case, we use <code>filter()</code> to limit the time period to 2020 and after and focus on observations (country-years) that had more than 1000 fatalities.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>ged <span class="sc">%&gt;%</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year_cy<span class="sc">&gt;=</span><span class="dv">2020</span> <span class="sc">&amp;</span> sb_total_deaths_best_cy<span class="sc">&gt;=</span><span class="dv">1000</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year_cy, <span class="at">y =</span> sb_total_deaths_best_cy)) <span class="sc">+</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>country_cy) <span class="sc">+</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">200000</span>,<span class="dv">50000</span>),</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">200000</span>),</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>                       <span class="at">labels=</span><span class="cf">function</span>(tdeaths) <span class="fu">format</span>(tdeaths, </span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>                                                       <span class="at">big.mark =</span> <span class="st">"'"</span>, </span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>                                                       <span class="at">scientific =</span> <span class="cn">FALSE</span>)) <span class="sc">+</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">"Total fatalities from state-based violence (best estimate)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="index_files/figure-html/unnamed-chunk-11-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6"><img src="index_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="960"></a></p>
</figure>
</div>
</div>
</div>
<p>The resulting graph shows some of the major developments in international relations of the last years, including the drawdown of the US-led intervention in Afghanistan, the conflicts in Ethiopia and Yemen, the conflict in Israel following the October 7 attacks by Hamas in 2023, and Russia’s invasion of Ukraine.</p>
</section>
</section>
</section>
<section id="next-steps" class="level2">
<h2 class="anchored" data-anchor-id="next-steps">Next steps</h2>
<p>If you are now thinking something like <em>“well, this was not really more advanced that working with any other macro-level dataset”</em>, then you are correct. That was precisely the point. This particular the <em>UCDP</em> dataset is just a typical country-year macro-level dataset, just like the <em>Comparative Political Dataset</em> or many other datasets used in comparative politics and comparative political economy. Therefore, if you can work with one of them, you can potentially work with all of them. The main difficulty is really only to understand what the different variables in the dataset measure and which one is the most relevant for a given research question or hypothesis – and this is why we have codebooks and research articles that present datasets and what they contain.</p>
<p>An obvious next step is now to try to explain some of the variation in conflict fatalities by looking, for example, at their relation to how democratic a country is <span class="citation" data-cites="Maoz1993 Oneal1997">(<a href="#ref-Maoz1993" role="doc-biblioref">Maoz and Russett 1993</a>; <a href="#ref-Oneal1997" role="doc-biblioref">Oneal and Russett 1997</a>)</span> or their welfare states <span class="citation" data-cites="Burgoon2006">(<a href="#ref-Burgoon2006" role="doc-biblioref">Burgoon 2006</a>)</span>, or to see what political consequences conflicts and fatalities can have <span class="citation" data-cites="Obinger2020">(e.g., <a href="#ref-Obinger2020" role="doc-biblioref">Obinger and Schmitt 2020</a>)</span>. To be able to do so, you need to merge the <em>UCDP</em> data with some relevant other datasets, for example the <em>V-DEM</em> data on democracy <span class="citation" data-cites="Lindbergetal2014 Coppedgeetal2011">(<a href="#ref-Lindbergetal2014" role="doc-biblioref">Lindberg et al. 2014</a>; <a href="#ref-Coppedgeetal2011" role="doc-biblioref">Coppedge et al. 2011</a>)</span> or the <em>Quality of Government</em> dataset <span class="citation" data-cites="QOG2025">(<a href="#ref-QOG2025" role="doc-biblioref">Teorell et al. 2025</a>)</span> that contains a wide range of variables on political actors, institutions, and public policies.</p>
<p>To merge these data, you just need to make sure that all countries are named or coded exactly equally (e.g., that the United States are called “United States” in both datasets, and not “US”, “USA”, or “United States of America” in one but not the other). The <code>countrycode</code> package can help with that <span class="citation" data-cites="countrycode">(<a href="#ref-countrycode" role="doc-biblioref">Arel-Bundock, Enevoldsen, and Yetman 2018</a>)</span>. After that, you just use <code>left_join()</code> to combine the datasets by country and year (see also <a href="https://cknotz.github.io/getstuffdone_blog/posts/globalization/#merging-the-datasets">this post</a>).</p>
<p>If you then want to do more advanced regression analyses with the combined datasets, you can have a look at the book by Urdinez &amp; Cruz <span class="citation" data-cites="Urdinez2020">(<a href="#ref-Urdinez2020" role="doc-biblioref">2020</a>)</span>.</p>
</section>
<section id="references" class="level2">




</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-countrycode" class="csl-entry" role="listitem">
Arel-Bundock, Vincent, Nils Enevoldsen, and CJ Yetman. 2018. <span>“<span class="nocase">countrycode: An R package to convert country names and country codes</span>.”</span> <em>Journal of Open Source Software</em> 3 (28): 848.
</div>
<div id="ref-Balch2000" class="csl-entry" role="listitem">
Balch-Lindsay, Dylan, and Andrew J Enterline. 2000. <span>“Killing Time: The World Politics of Civil War Duration, 1820–1992.”</span> <em>International Studies Quarterly</em> 44 (4): 615–42.
</div>
<div id="ref-Burgoon2006" class="csl-entry" role="listitem">
Burgoon, Brian. 2006. <span>“On Welfare and Terror: Social Welfare Policies and Political-Economic Roots of Terrorism.”</span> <em>Journal of Conflict Resolution</em> 50 (2): 176–203.
</div>
<div id="ref-Coppedgeetal2011" class="csl-entry" role="listitem">
Coppedge, Michael, John Gerring, David Altman, Michael Bernhard, Steven Fish, Allen Hicken, Matthew Kroenig, et al. 2011. <span>“Conceptualizing and Measuring Democracy: A New Approach.”</span> <em>Perspectives on Politics</em> 9 (2): 247–67.
</div>
<div id="ref-Daviesetal2025" class="csl-entry" role="listitem">
Davies, Shawn, Therése Pettersson, Margareta Sollenberg, and Magnus Öberg. 2025. <span>“Organized Violence 1989–2024, and the Challenges of Identifying Civilian Victims.”</span> <em>Journal of Peace Research</em> 62 (4).
</div>
<div id="ref-Fearon2003" class="csl-entry" role="listitem">
Fearon, James D., and David D. Laitin. 2003. <span>“Ethnicity, Insurgency, and Civil War.”</span> <em>American Political Science Review</em> 97 (1): 75–90.
</div>
<div id="ref-Fjelde2022" class="csl-entry" role="listitem">
Fjelde, Hanne, and Hannah M Smidt. 2022. <span>“Protecting the Vote? <span>Peacekeeping</span> Presence and the Risk of Electoral Violence.”</span> <em>British Journal of Political Science</em> 52 (3): 1113–32.
</div>
<div id="ref-Lindbergetal2014" class="csl-entry" role="listitem">
Lindberg, Staffan I, Michael Coppedge, John Gerring, and Jan Teorell. 2014. <span>“<span>V-Dem</span>: A New Way to Measure Democracy.”</span> <em>Journal of Democracy</em> 25 (3): 159–69.
</div>
<div id="ref-Maoz1993" class="csl-entry" role="listitem">
Maoz, Zeev, and Bruce Russett. 1993. <span>“Normative and Structural Causes of Democratic Peace, 1946–1986.”</span> <em>American Political Science Review</em> 87 (3): 624–38.
</div>
<div id="ref-Obinger2020" class="csl-entry" role="listitem">
Obinger, Herbert, and Carina Schmitt. 2020. <span>“Total War and the Emergence of Unemployment Insurance in Western Countries.”</span> <em>Journal of European Public Policy</em> 27 (12): 1879–1901.
</div>
<div id="ref-Oneal1997" class="csl-entry" role="listitem">
Oneal, John R., and Bruce M. Russett. 1997. <span>“The Classical Liberals Were Right: Democracy, Interdependence, and Conflict, 1950-1985.”</span> <em>International Studies Quarterly</em> 41 (2): 267–94.
</div>
<div id="ref-Sundberg2013" class="csl-entry" role="listitem">
Sundberg, Ralph, and Erik Melander. 2013. <span>“Introducing the <span>UCDP</span> Georeferenced Event Dataset.”</span> <em>Journal of Peace Research</em> 50 (4): 523–32.
</div>
<div id="ref-QOG2025" class="csl-entry" role="listitem">
Teorell, Jan, Aksel Sundström, Sören Holmberg, Bo Rothstein, Natalia Alvarado Pachon, Cem Mert Dalli, Rafael Lopez Valverde, Victor Saidi Phiri, and Lauren Gerber. 2025. <em>The Quality of Government Standard Dataset, v. Jan25</em>. Gothenburg: The Quality of Government Institute, University of Gothenburg.
</div>
<div id="ref-Urdinez2020" class="csl-entry" role="listitem">
Urdinez, Francisco, and Andres Cruz. 2020. <em>R for Political Data Science: A Practical Guide</em>. Boca Raton; others: CRC Press.
</div>
<div id="ref-Waltz1959" class="csl-entry" role="listitem">
Waltz, Kenneth Neal. 1959. <em>Man, the State, and War: A Theoretical Analysis</em>. New York: Columbia University Press.
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>See also <a href="https://github.com/erikgahner/PolData?tab=readme-ov-file#international-relations" class="uri">https://github.com/erikgahner/PolData?tab=readme-ov-file#international-relations</a> for a more exhaustive lists of datasets and sources on war, conflict, and international relations.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
            // default icon
            link.classList.add("external");
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>